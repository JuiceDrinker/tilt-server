(this["webpackJsonptilt-client"]=this["webpackJsonptilt-client"]||[]).push([[0],{22:function(e,t){e.exports.convertSecondsToDisplay=function(e){var t=function(e){return 1===e.toString().length?"0".concat(e):e},n=t(Math.floor(e/3600)),a=t(Math.floor(e/60)%60),r=t(Math.floor(e%60));return"".concat(n,":").concat(a,":").concat(r)}},56:function(e,t,n){e.exports=n(98)},77:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(41),c=n.n(o),s=n(9),i=n(3),u=n(4),l=n(6),p=n(5),h=n(7),d=n(18),m=n.n(d),g=new(function(){function e(){Object(i.a)(this,e),this.auth=m.a.create({baseURL:"https://tilt-pod.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/signup",{username:t,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/login",{username:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),b=r.a.createContext(),f=b.Consumer,v=b.Provider,O=function(e){return function(t){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(u.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(f,null,(function(n){var a=n.login,o=n.signup,c=n.logout,s=n.user,i=n.isLoggedIn;return r.a.createElement(e,Object.assign({user:s,isLoggedIn:i,login:a,signup:o,logout:c},t.props))}))}}]),n}(a.Component)},j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,user:null,isLoading:!0},n.signup=function(e,t){g.signup({username:e,password:t}).then((function(e){return n.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},n.login=function(e,t){g.login({username:e,password:t}).then((function(e){return n.setState({isLoggedIn:!0,user:e})})).catch((function(e){return console.log(e)}))},n.logout=function(){g.logout().then((function(){return n.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedIn,a=e.user,o=this.login,c=this.logout,s=this.signup;return r.a.createElement(v,{value:{isLoading:t,isLoggedIn:n,user:a,login:o,logout:c,signup:s}},this.props.children)}}]),t}(r.a.Component),E=(n(77),n(17)),y=O(function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.logout),n=e.isLoggedIn;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(s.b,{to:"/",id:"home-btn"},r.a.createElement("h4",null,"Home")),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/profile"},r.a.createElement("button",null," Profile ")),r.a.createElement("button",{onClick:t},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/login"}," ",r.a.createElement("button",{className:"navbar-button"},"Login")," "),r.a.createElement("br",null),r.a.createElement(s.b,{to:"/signup"}," ",r.a.createElement("button",{className:"navbar-button"},"Sign Up")," ")))}}]),t}(a.Component)),S=n(19),w=O(function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.signup(a,r)},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(s.b,{to:"/login"}," Login"))}}]),t}(a.Component)),C=O(function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.login(a,r)},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(a.Component));O(function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Private Route"),r.a.createElement("h1",null,"Welcome ",this.props.user.username))}}]),t}(a.Component));n(38).config();var k=new function e(){var t=this;Object(i.a)(this,e),this.getAllLangs=function(){return t.api.get("/languages")},this.getAllGenres=function(){return t.api.get("/genres")},this.getRandomEpisodeObj=function(){return t.api.get("/just_listen")},this.getSearchResults=function(e){return t.api.get("/search?q=".concat(e))},this.getTypeaheadResults=function(e){return t.api.get("/typeahead/".concat(e))},this.getOnePodcast=function(e){return t.api.get("podcasts/".concat(e))},this.getOneEpisode=function(e){return t.api.get("episodes/".concat(e))},this.getBestPodcast=function(e){return t.api.get("/best_podcasts/".concat(e))},this.getPodcastRecommendation=function(e){return t.api.get("/podcasts/".concat(e,"/recommendations"))},this.getEpisodesRecommendation=function(e){return t.api.get("/episodes/".concat(e,"/recommendations"))},this.api=m.a.create({baseURL:"https://listen-api.listennotes.com/api/v2",headers:{get:{"X-ListenAPI-Key":"d3a7bafec2c841bba3d2f8b31fb4de02"}}})},L=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Object(S.a)({searchQuery:"",type:"podcast",sortByDate:!1},"type",""),n.setQueryResult=function(e){(0,n.props.returnData)(e)},n.handleChange=function(e){var t=e.target.value;n.setState((function(e,n){return{searchQuery:t}}))},n.handleSortByDate=function(e){var t=e.target.value;n.setState({sortByDate:t})},n.handleSubmit=function(e){e.preventDefault();var t=n.state.searchQuery.replace(" ","%20").concat("&type=".concat(n.state.type));k.getSearchResults(t).then((function(e){return e.data})).then((function(e){n.setQueryResult(e)})).catch((function(e){return console.log("err",e)}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"searchBar",value:this.state.searchQuery,placeholder:"Search for your favourite podcasts",onChange:this.handleChange}),r.a.createElement("button",{onClick:this.handleSubmit},"Search"))}}]),t}(a.Component),D=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={dataToRender:n.props.data},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props.data;this.setState((function(e,n){return{dataToRender:t}}))}}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.dataToRender.map((function(e){return r.a.createElement(s.b,{key:"".concat(e.id),to:"/podcastResult/".concat(e.id)},r.a.createElement("img",{src:e.image,alt:"",width:"200",height:"200"}))})))}}]),t}(a.Component),P=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).getSearchData=function(t){e.setState({searchData:t.results,isQueryRecieved:!0})},e.state={searchData:[],isQueryRecieved:!1},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.getBestPodcast("").then((function(t){var n=t.data.podcasts;e.setState({searchData:n})})).catch((function(e){console.log("err :",e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(L,{returnData:this.getSearchData}),r.a.createElement(D,{data:this.state.searchData}))}}]),t}(a.Component),R=n(22),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={episodeObj:{},runTime:0},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.episodeObj,t=Object(R.convertSecondsToDisplay)(e.audio_length_sec);this.setState({episodeObj:e,runTime:t})}},{key:"render",value:function(){return this.state.episodeObj?r.a.createElement("div",null,r.a.createElement(s.b,{to:"/episode/".concat(this.state.episodeObj.id)},r.a.createElement("img",{src:this.state.episodeObj.image,alt:""})),this.state.episodeObj.description,r.a.createElement("br",null),r.a.createElement("p",null,"Run Time: ",this.state.runTime)):null}}]),t}(a.Component),_=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={podcastObj:{}},n.displayDescription=function(){return n.state.podcastObj.description},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;k.getOnePodcast(t).then((function(t){var n=t.data;e.setState({podcastObj:n})})).catch((function(e){console.log("err :",e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.podcastObj.title),r.a.createElement("img",{src:this.state.podcastObj.thumbnail,alt:""}),this.state.podcastObj.episodes?this.state.podcastObj.episodes.map((function(e){return r.a.createElement(A,{episodeObj:e,key:e.id})})):"loading",this.displayDescription())}}]),t}(a.Component),I=n(55),T=(n(85),n(54)),x=n.n(T),U=n(21),B=n.n(U),M=n(27);n(38).config();var N=new function e(){var t=this;Object(i.a)(this,e),this.setNewListenedEpisode=function(){var e=Object(M.a)(B.a.mark((function e(n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.listenedEpisode.post("/",{episodeID:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setEpisodeProgress=function(){var e=Object(M.a)(B.a.mark((function e(n,a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.listenedEpisode.put("/".concat(n),{progress:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.listenedEpisode=m.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://tilt-pod.herokuapp.com",REACT_APP_API_BASE_URL:"https://listen-api.listennotes.com/api/v2",REACT_APP_API_KEY:"d3a7bafec2c841bba3d2f8b31fb4de02"}).REACT_APP_BACKEND_DEV,"/listenedEpisode"),withCredentials:!0})},Q=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={id:null,episodeObj:{}},n.saveToUser=function(){N.setNewListenedEpisode(n.state.id)},n.updateProgress=function(e){N.setEpisodeProgress(n.state.id,e.target.currentTime)},n.Player=function(){return r.a.createElement(I.a,{src:n.state.episodeObj.audio,showSkipControls:!0,onPlay:n.saveToUser,onPause:n.updateProgress})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState((function(e,n){return{id:t}})),k.getOneEpisode(t).then((function(t){var n=t.data;e.setState({episodeObj:n}),console.log("episode",n.audio)})).catch((function(e){console.log("err",e)}))}},{key:"render",value:function(){return this.state.episodeObj?r.a.createElement("div",null,r.a.createElement("img",{src:this.state.episodeObj.image,alt:""}),r.a.createElement("br",null),Object(R.convertSecondsToDisplay)(this.state.episodeObj.audio_length_sec),x()(this.state.episodeObj.description?this.state.episodeObj.description:"loading"),this.Player()):null}}]),t}(a.Component),F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={currentUser:{}},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){e.setState({currentUser:t}),console.log("this.state",e.state)})).catch((function(e){console.log("err",e)}))}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(a.Component),K=n(23);var W=O((function(e){var t=e.component,n=e.isLoggedIn,a=Object(K.a)(e,["component","isLoggedIn"]);return(r.a.createElement(E.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(E.a,{to:"/"}):n?void 0:r.a.createElement(t,e)}})))}));var H=O((function(e){var t=e.component,n=e.isLoggedIn,a=Object(K.a)(e,["component","isLoggedIn"]);return r.a.createElement(E.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):n?void 0:r.a.createElement(E.a,{to:"/"})}}))})),J=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).toggleIndex=function(){return n.setState({showIndex:!0})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(E.d,null,r.a.createElement(W,{exact:!0,path:"/signup",component:w}),r.a.createElement(W,{exact:!0,path:"/login",component:C}),r.a.createElement(H,{exact:!0,path:"/",component:P}),r.a.createElement(H,{exact:!0,path:"/podcastResult/:id",component:_}),r.a.createElement(H,{exact:!0,path:"/episode/:id",component:Q}),r.a.createElement(H,{exact:!0,path:"/profile",component:F})))}}]),t}(a.Component);c.a.render(r.a.createElement(s.a,null,r.a.createElement(j,null,r.a.createElement(J,null))),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.f8f0181a.chunk.js.map